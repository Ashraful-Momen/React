# Complete Redux Toolkit CRUD Operations - Books Management App

## Table of Contents
1. [Project Setup](#lesson-1-project-setup)
2. [Read Operation (Display Books)](#lesson-2-read-operation)
3. [Create Operation (Add Books)](#lesson-3-create-operation)
4. [Delete Operation (Remove Books)](#lesson-4-delete-operation)
5. [Update Operation (Edit Books)](#lesson-5-update-operation)
6. [Advanced Patterns](#lesson-6-advanced-patterns)
7. [Best Practices](#lesson-7-best-practices)

---

## Lesson 1: Project Setup

### Step 1: Create Vite React Project
```bash
npm create vite@latest book-crud-app
# Select: react > javascript > project_name
cd book-crud-app
npm install
```

### Step 2: Install Required Dependencies
```bash
npm install @reduxjs/toolkit react-redux
npm install bootstrap
```

### Step 3: Project Structure
Create the following folder structure:
```
/src
    /app
        store.js
    /components
        BookList.jsx
        BookForm.jsx
    /features
        bookSlice.js
    App.jsx
    main.jsx
```

### Step 4: Basic Setup - main.jsx
```javascript
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.jsx'
import { Provider } from 'react-redux'

// Custom imports
import 'bootstrap/dist/css/bootstrap.min.css'
import { store } from './app/store'

createRoot(document.getElementById('root')).render(
  <Provider store={store}>
    <App />
  </Provider>,
)
```

---

## Lesson 2: Read Operation (Display Books)

### Step 1: Create Initial Book Slice
```javascript
// features/bookSlice.js
import { createSlice } from '@reduxjs/toolkit';

const initialState = {
    books: [
        {
            id: 1, 
            title: 'The Alchemist',
            author: 'Paulo Coelho',
            price: 10,
            quantity: 1
        },
        {
            id: 2, 
            title: 'The Name Of Jungle',
            author: 'Momen',
            price: 20,
            quantity: 1
        },
        {
            id: 3, 
            title: 'Life of Pi',
            author: 'Yann Martel',
            price: 30,
            quantity: 1
        },
    ],
}

export const bookSlice = createSlice({
    name: 'book',
    initialState: initialState,
    reducers: {
        // We'll add reducers in upcoming lessons
    },
});

// Export actions (empty for now)
export const {  } = bookSlice.actions;

// Export reducer
export default bookSlice.reducer;
```

### Step 2: Configure Store
```javascript
// app/store.js
import { configureStore } from '@reduxjs/toolkit'; 
import bookSlice from '../features/bookSlice';

export const store = configureStore({
    reducer: {
        bookR: bookSlice, // 'bookR' will be the key to access book state
    },
});
```

### Step 3: Create App Component
```javascript
// App.jsx
import React from 'react'
import BookList from './components/BookList'

const App = () => {
  return (
    <div className="container mt-4">
      <h1 className="text-center mb-4">Book Management System</h1>
      <BookList />
    </div>
  )
}

export default App
```

### Step 4: Create BookList Component (Read Operation)
```javascript
// components/BookList.jsx
import React from "react";
import { useSelector } from "react-redux";

const BookList = () => {
  // Fetch books from Redux store
  const books = useSelector((state) => state.bookR.books);

  return (
    <div>
      <div className="row">
        <h2 className="text-center">List of Books</h2>
        <hr />
        {books && books.length > 0 ? (
          <ul className="list-unstyled">
            {books.map((book) => {
              return (
                <li key={book.id} className="card mb-3 p-3">
                  <h3 className="text-center">
                    {book.title} - <span className="text-muted">{book.author}</span>
                  </h3>
                  <p className="text-center">
                    Price: {book.price} Tk - Quantity: {book.quantity}
                  </p>
                </li>
              );
            })}
          </ul>
        ) : (
          <h3 className="text-center text-muted">No Books Found</h3>
        )}
      </div>
    </div>
  );
};

export default BookList;
```

### Key Learning Points:
- **useSelector**: Extracts data from Redux store
- **State structure**: `state.bookR.books` (bookR from store configuration)
- **Conditional rendering**: Handle empty state gracefully
- **Component responsibility**: BookList only handles displaying data

---

## Lesson 3: Create Operation (Add Books)

### Step 1: Update Book Slice with addBook Reducer
```javascript
// features/bookSlice.js
import { createSlice } from '@reduxjs/toolkit';

const initialState = {
    books: [
        {
            id: 1, 
            title: 'The Alchemist',
            author: 'Paulo Coelho',
            price: 10,
            quantity: 1
        },
        {
            id: 2, 
            title: 'The Name Of Jungle',
            author: 'Momen',
            price: 20,
            quantity: 1
        },
        {
            id: 3, 
            title: 'Life of Pi',
            author: 'Yann Martel',
            price: 30,
            quantity: 1
        },
    ],
}

export const bookSlice = createSlice({
    name: 'book',
    initialState: initialState,
    reducers: {
        addBook: (state, action) => {
            const newBook = action.payload;
            state.books.push(newBook);
        },
    },
});

// Export actions
export const { addBook } = bookSlice.actions;

// Export reducer
export default bookSlice.reducer;
```

### Step 2: Create BookForm Component
```javascript
// components/BookForm.jsx
import React, { useState } from "react";
import { addBook } from "../features/bookSlice";
import { useDispatch } from "react-redux";

const BookForm = () => {
  // Local state for form fields
  const [book, setBook] = useState({
    title: "",
    author: "",
    price: "",
    quantity: "",
  });

  // Get dispatch function
  const dispatch = useDispatch(); 

  // Handle input changes
  const handleChange = (event) => {
    const { name, value } = event.target; 
    setBook((prevBook) => ({
      ...prevBook, 
      [name]: value
    }));
  }

  // Handle form submission
  const handleSubmit = (event) => {
    event.preventDefault();

    // Generate a random ID for the new book
    const randomId = Math.floor(Math.random() * 1000000);

    // Create new book object with ID
    const newBook = { 
      ...book, 
      id: randomId,
      price: Number(book.price),
      quantity: Number(book.quantity)
    };

    // Dispatch action to add book
    dispatch(addBook(newBook));  

    // Reset form
    setBook({
      title: "",
      author: "",
      price: "",
      quantity: "",
    });
  }

  return (
    <div className="card p-4 mb-4">
      <h3 className="text-center mb-3">Add New Book</h3>
      <form onSubmit={handleSubmit}>
        <div className="mb-3">
          <input
            type="text"
            name="title"
            value={book.title}
            onChange={handleChange}
            placeholder="Book Title"
            className="form-control"
            required
          />
        </div>
        <div className="mb-3">
          <input
            type="text"
            name="author"
            value={book.author}
            onChange={handleChange}
            placeholder="Author Name"
            className="form-control"
            required
          />
        </div>
        <div className="mb-3">
          <input
            type="number"
            name="price"
            value={book.price}
            onChange={handleChange}
            placeholder="Price"
            className="form-control"
            required
          />
        </div>
        <div className="mb-3">
          <input
            type="number"
            name="quantity"
            value={book.quantity}
            onChange={handleChange}
            placeholder="Quantity"
            className="form-control"
            required
          />
        </div>
        <button type="submit" className="btn btn-primary w-100">
          Add Book
        </button>
      </form>
    </div>
  );
};

export default BookForm;
```

### Step 3: Update App Component
```javascript
// App.jsx
import React from 'react'
import BookList from './components/BookList'
import BookForm from './components/BookForm'

const App = () => {
  return (
    <div className="container mt-4">
      <h1 className="text-center mb-4">Book Management System</h1>
      <div className="row">
        <div className="col-md-6">
          <BookForm />
        </div>
        <div className="col-md-6">
          <BookList />
        </div>
      </div>
    </div>
  )
}

export default App
```

### Key Learning Points:
- **Form state management**: Using useState for form fields
- **useDispatch**: Sending actions to Redux store
- **ID generation**: Creating unique IDs for new items
- **Form reset**: Clearing form after submission
- **Data transformation**: Converting strings to numbers for price/quantity

---

## Lesson 4: Delete Operation (Remove Books)

### Step 1: Add deleteBook Reducer to Slice
```javascript
// features/bookSlice.js
import { createSlice } from '@reduxjs/toolkit';

const initialState = {
    books: [
        {
            id: 1, 
            title: 'The Alchemist',
            author: 'Paulo Coelho',
            price: 10,
            quantity: 1
        },
        {
            id: 2, 
            title: 'The Name Of Jungle',
            author: 'Momen',
            price: 20,
            quantity: 1
        },
        {
            id: 3, 
            title: 'Life of Pi',
            author: 'Yann Martel',
            price: 30,
            quantity: 1
        },
    ],
}

export const bookSlice = createSlice({
    name: 'book',
    initialState: initialState,
    reducers: {
        addBook: (state, action) => {
            const newBook = action.payload;
            state.books.push(newBook);
        },
        deleteBook: (state, action) => {
            const { id } = action.payload;
            state.books = state.books.filter((book) => book.id !== id);
        },
    },
});

// Export actions
export const { addBook, deleteBook } = bookSlice.actions;

// Export reducer
export default bookSlice.reducer;
```

### Step 2: Update BookList Component with Delete Functionality
```javascript
// components/BookList.jsx
import React from "react";
import { useDispatch, useSelector } from "react-redux";
import { deleteBook } from "../features/bookSlice";

const BookList = () => {
  // Fetch books from Redux store
  const books = useSelector((state) => state.bookR.books);
  
  // Get dispatch function
  const dispatch = useDispatch(); 

  // Delete handler
  const handleDelete = (id) => {
    if (window.confirm('Are you sure you want to delete this book?')) {
      dispatch(deleteBook({ id }));
    }
  }

  return (
    <div>
      <div className="row">
        <h2 className="text-center mb-3">List of Books</h2>
        <hr />
        {books && books.length > 0 ? (
          <div>
            {books.map((book) => {
              return (
                <div key={book.id} className="card mb-3 p-3">
                  <h4 className="text-center">
                    {book.title} - <span className="text-muted">{book.author}</span>
                  </h4>
                  <p className="text-center">
                    Price: {book.price} Tk - Quantity: {book.quantity}
                  </p>
                  <div className="text-center">
                    <button 
                      onClick={() => handleDelete(book.id)} 
                      className="btn btn-danger btn-sm"
                    >
                      Delete
                    </button>
                  </div>
                </div>
              );
            })}
          </div>
        ) : (
          <h3 className="text-center text-muted">No Books Found</h3>
        )}
      </div>
    </div>
  );
};

export default BookList;
```

### Key Learning Points:
- **Filter method**: Using filter to remove items from array
- **Confirmation dialog**: Using window.confirm for user confirmation
- **Payload structure**: Passing { id } as action payload
- **Event handling**: Connecting delete button to handler function

---

## Lesson 5: Update Operation (Edit Books)

### Understanding the Update Flow:
1. **BookList** → sends book data to **App** component
2. **App** → manages edit state and passes book data to **BookForm**
3. **BookForm** → receives book data and populates form fields
4. **Form submission** → updates existing book instead of creating new one

### Step 1: Add updateBook Reducer to Slice
```javascript
// features/bookSlice.js
import { createSlice } from '@reduxjs/toolkit';

const initialState = {
    books: [
        {
            id: 1, 
            title: 'The Alchemist',
            author: 'Paulo Coelho',
            price: 10,
            quantity: 1
        },
        {
            id: 2, 
            title: 'The Name Of Jungle',
            author: 'Momen',
            price: 20,
            quantity: 1
        },
        {
            id: 3, 
            title: 'Life of Pi',
            author: 'Yann Martel',
            price: 30,
            quantity: 1
        },
    ],
}

export const bookSlice = createSlice({
    name: 'book',
    initialState: initialState,
    reducers: {
        addBook: (state, action) => {
            const newBook = action.payload;
            state.books.push(newBook);
        },
        deleteBook: (state, action) => {
            const { id } = action.payload;
            state.books = state.books.filter((book) => book.id !== id);
        },
        updateBook: (state, action) => {
            const updatedBook = action.payload;
            const index = state.books.findIndex((book) => book.id === updatedBook.id);
            if (index !== -1) {
                state.books[index] = updatedBook;
            }
        },
    },
});

// Export actions
export const { addBook, deleteBook, updateBook } = bookSlice.actions;

// Export reducer
export default bookSlice.reducer;
```

### Step 2: Update App Component for Edit State Management
```javascript
// App.jsx
import React, { useState } from "react";
import BookList from "./components/BookList";
import BookForm from "./components/BookForm";

const App = () => {
  // State to manage which book is being edited
  const [bookToEdit, setBookToEdit] = useState(null);

  // Handle edit request from BookList
  const handleEdit = (book) => {
    setBookToEdit(book);
  };

  // Handle cancel edit
  const handleCancelEdit = () => {
    setBookToEdit(null);
  }

  return (
    <div className="container mt-4">
      <h1 className="text-center mb-4">Book Management System</h1>
      <div className="row">
        <div className="col-md-6">
          <BookForm 
            bookToEdit={bookToEdit} 
            onCancelEdit={handleCancelEdit}
          />
        </div>
        <div className="col-md-6">
          <BookList onHandleEdit={handleEdit} />
        </div>
      </div>
    </div>
  );
};

export default App;
```

### Step 3: Update BookList with Edit Button
```javascript
// components/BookList.jsx
import React from "react";
import { useDispatch, useSelector } from "react-redux";
import { deleteBook } from "../features/bookSlice";

const BookList = ({ onHandleEdit }) => {
  // Fetch books from Redux store
  const books = useSelector((state) => state.bookR.books);
  
  // Get dispatch function
  const dispatch = useDispatch(); 

  // Delete handler
  const handleDelete = (id) => {
    if (window.confirm('Are you sure you want to delete this book?')) {
      dispatch(deleteBook({ id }));
    }
  }

  // Edit handler - passes book data to parent component
  const handleEdit = (book) => {
    onHandleEdit(book);
  }

  return (
    <div>
      <div className="row">
        <h2 className="text-center mb-3">List of Books</h2>
        <hr />
        {books && books.length > 0 ? (
          <div>
            {books.map((book) => {
              return (
                <div key={book.id} className="card mb-3 p-3">
                  <h4 className="text-center">
                    {book.title} - <span className="text-muted">{book.author}</span>
                  </h4>
                  <p className="text-center">
                    Price: {book.price} Tk - Quantity: {book.quantity}
                  </p>
                  <div className="text-center">
                    <button 
                      onClick={() => handleEdit(book)} 
                      className="btn btn-warning btn-sm me-2"
                    >
                      Edit
                    </button>
                    <button 
                      onClick={() => handleDelete(book.id)} 
                      className="btn btn-danger btn-sm"
                    >
                      Delete
                    </button>
                  </div>
                </div>
              );
            })}
          </div>
        ) : (
          <h3 className="text-center text-muted">No Books Found</h3>
        )}
      </div>
    </div>
  );
};

export default BookList;
```

### Step 4: Update BookForm for Edit Functionality
```javascript
// components/BookForm.jsx
import React, { useEffect, useState } from "react";
import { addBook, updateBook } from "../features/bookSlice";
import { useDispatch } from "react-redux";

const BookForm = ({ bookToEdit, onCancelEdit }) => {
  // Local state for form fields
  const [book, setBook] = useState({
    title: "",
    author: "",
    price: "",
    quantity: "",
  });

  // Get dispatch function
  const dispatch = useDispatch(); 

  // Handle input changes
  const handleChange = (event) => {
    const { name, value } = event.target; 
    setBook((prevBook) => ({
      ...prevBook, 
      [name]: value
    }));
  }

  // Handle form submission
  const handleSubmit = (event) => {
    event.preventDefault();

    if (bookToEdit) {
      // Update existing book
      const updatedBook = { 
        ...book, 
        id: bookToEdit.id,
        price: Number(book.price),
        quantity: Number(book.quantity)
      };
      dispatch(updateBook(updatedBook));
      onCancelEdit(); // Clear edit mode
    } else {
      // Add new book
      const randomId = Math.floor(Math.random() * 1000000);
      const newBook = { 
        ...book, 
        id: randomId,
        price: Number(book.price),
        quantity: Number(book.quantity)
      };
      dispatch(addBook(newBook));  
    }

    // Reset form
    setBook({
      title: "",
      author: "",
      price: "",
      quantity: "",
    });
  }

  // Handle cancel edit
  const handleCancel = () => {
    onCancelEdit();
    setBook({
      title: "",
      author: "",
      price: "",
      quantity: "",
    });
  }

  // useEffect to populate form when bookToEdit changes
  useEffect(() => {
    if (bookToEdit) {
      setBook({
        title: bookToEdit.title,
        author: bookToEdit.author,
        price: bookToEdit.price.toString(),
        quantity: bookToEdit.quantity.toString(),
      });
    }
  }, [bookToEdit]);

  return (
    <div className="card p-4 mb-4">
      <h3 className="text-center mb-3">
        {bookToEdit ? "Edit Book" : "Add New Book"}
      </h3>
      <form onSubmit={handleSubmit}>
        <div className="mb-3">
          <input
            type="text"
            name="title"
            value={book.title}
            onChange={handleChange}
            placeholder="Book Title"
            className="form-control"
            required
          />
        </div>
        <div className="mb-3">
          <input
            type="text"
            name="author"
            value={book.author}
            onChange={handleChange}
            placeholder="Author Name"
            className="form-control"
            required
          />
        </div>
        <div className="mb-3">
          <input
            type="number"
            name="price"
            value={book.price}
            onChange={handleChange}
            placeholder="Price"
            className="form-control"
            required
          />
        </div>
        <div className="mb-3">
          <input
            type="number"
            name="quantity"
            value={book.quantity}
            onChange={handleChange}
            placeholder="Quantity"
            className="form-control"
            required
          />
        </div>
        <div className="d-flex gap-2">
          <button type="submit" className="btn btn-primary flex-fill">
            {bookToEdit ? "Update Book" : "Add Book"}
          </button>
          {bookToEdit && (
            <button 
              type="button" 
              onClick={handleCancel}
              className="btn btn-secondary"
            >
              Cancel
            </button>
          )}
        </div>
      </form>
    </div>
  );
};

export default BookForm;
```

### Key Learning Points:
- **Parent-child communication**: Passing functions as props to communicate between components
- **useEffect hook**: Automatically populate form when edit mode changes
- **Conditional rendering**: Different button text and behavior based on edit mode
- **State lifting**: Managing edit state at the App component level
- **Form population**: Converting numbers to strings for form inputs

---

## Lesson 6: Advanced Patterns

### 1. ID Generation Strategy
```javascript
// Better ID generation approach
const generateId = () => {
  return Date.now() + Math.floor(Math.random() * 1000);
}

// Or use a counter-based approach
let nextId = 4; // Start after existing books
const generateId = () => nextId++;
```

### 2. Input Validation
```javascript
// In BookForm component
const validateBook = (book) => {
  const errors = {};
  
  if (!book.title.trim()) {
    errors.title = 'Title is required';
  }
  
  if (!book.author.trim()) {
    errors.author = 'Author is required';
  }
  
  if (book.price <= 0) {
    errors.price = 'Price must be greater than 0';
  }
  
  return errors;
}
```

### 3. Loading States
```javascript
// Add loading state to slice
const initialState = {
    books: [...],
    loading: false,
    error: null
}

// Add loading reducers
reducers: {
    setLoading: (state, action) => {
        state.loading = action.payload;
    },
    setError: (state, action) => {
        state.error = action.payload;
    }
}
```

### 4. Search Functionality
```javascript
// Add search reducer
searchBooks: (state, action) => {
    const searchTerm = action.payload.toLowerCase();
    state.filteredBooks = state.books.filter(book => 
        book.title.toLowerCase().includes(searchTerm) ||
        book.author.toLowerCase().includes(searchTerm)
    );
}
```

---

## Lesson 7: Best Practices

### 1. Component Organization
- **Single Responsibility**: Each component handles one specific task
- **Props Interface**: Clear prop types and interfaces
- **Error Handling**: Handle edge cases gracefully

### 2. Redux Patterns
- **Normalized State**: Keep state flat and normalized
- **Immutable Updates**: Always return new state objects
- **Action Naming**: Use descriptive action names

### 3. Performance Optimization
```javascript
// Use React.memo for pure components
const BookList = React.memo(({ onHandleEdit }) => {
  // Component logic
});

// Use useMemo for expensive calculations
const filteredBooks = useMemo(() => {
  return books.filter(book => book.title.includes(searchTerm));
}, [books, searchTerm]);
```

### 4. Error Handling
```javascript
// In components
const BookList = () => {
  const { books, loading, error } = useSelector((state) => state.bookR);
  
  if (loading) return <div>Loading...</div>;
  if (error) return <div>Error: {error}</div>;
  
  return (
    // Component JSX
  );
};
```

### 5. TypeScript Integration (Optional)
```typescript
// types.ts
export interface Book {
  id: number;
  title: string;
  author: string;
  price: number;
  quantity: number;
}

export interface BookState {
  books: Book[];
  loading: boolean;
  error: string | null;
}
```

---

## Complete Code Summary

### Final Project Structure:
```
src/
├── app/
│   └── store.js
├── components/
│   ├── BookForm.jsx
│   └── BookList.jsx
├── features/
│   └── bookSlice.js
├── App.jsx
└── main.jsx
```

### Key Redux Concepts Covered:
- ✅ **Creating slices** with reducers
- ✅ **State management** with Redux store
- ✅ **useSelector** for reading state
- ✅ **useDispatch** for updating state
- ✅ **CRUD operations** (Create, Read, Update, Delete)
- ✅ **Component communication** via props
- ✅ **Form handling** with local state
- ✅ **Conditional rendering** for different UI states

### Next Steps:
1. Add form validation
2. Implement search/filter functionality
3. Add sorting capabilities
4. Integrate with a backend API
5. Add pagination for large datasets
6. Implement undo/redo functionality
7. Add TypeScript for better type safety

This completes a comprehensive Redux Toolkit CRUD application without using async thunks!
