# Redux Toolkit - Separate Notes

## üìñ Note 1: POST SHOW (Fetch & Display Posts)

### **Complete Flow for Fetching and Displaying Posts**

---

### **Step 1: Create Async Thunk in postSlice.js**
```javascript
import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';
import axios from 'axios';

// Create async thunk for fetching posts
export const fetchPosts = createAsyncThunk('posts/fetchPosts', async () => {
  const res = await axios.get('https://jsonplaceholder.typicode.com/posts');
  return res.data;
});
```

---

### **Step 2: Setup Slice with extraReducers**
```javascript
const postsSlice = createSlice({
  name: 'posts',
  initialState: {
    posts: [],
    isLoading: false,
    error: null,
  },
  reducers: {},
  extraReducers: (builder) => {
    // Handle Pending State
    builder.addCase(fetchPosts.pending, (state) => {
      state.isLoading = true;
    });
    
    // Handle Success State
    builder.addCase(fetchPosts.fulfilled, (state, action) => {
      state.isLoading = false;
      state.posts = action.payload;  // Store fetched posts
    });
    
    // Handle Error State
    builder.addCase(fetchPosts.rejected, (state, action) => {
      state.isLoading = false;
      state.error = action.error.message;
    });
  },
});

export default postsSlice.reducer;
```

---

### **Step 3: Configure Store**
```javascript
// store.js
import { configureStore } from "@reduxjs/toolkit";
import postSlice from "../features/posts/postSlice";

const store = configureStore({
    reducer: {
        posts: postSlice,  // Register posts reducer
    },
});

export default store;
```

---

### **Step 4: Wrap App with Provider**
```javascript
// index.js
import { Provider } from 'react-redux';
import store from './app/store';

root.render(
  <Provider store={store}>
    <App />
  </Provider>
);
```

---

### **Step 5: Display Posts in Component**
```javascript
// PostView.js
import React, { useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { fetchPosts } from './postSlice';

const PostView = () => {
  // Get state from Redux store
  const { isLoading, posts, error } = useSelector((state) => state.posts);
  const dispatch = useDispatch();

  // Fetch posts on component mount
  useEffect(() => {
    dispatch(fetchPosts());
  }, [dispatch]);

  // Loading state
  if (isLoading) return <div>Loading...</div>;
  
  // Error state
  if (error) return <div className="text-red-500">{error}</div>;

  // Display posts
  return (
    <div className="max-w-4xl mx-auto p-4">
      <h1 className="text-2xl font-bold mb-6">Posts</h1>

      <div className="space-y-4">
        {posts.map((post) => (
          <div key={post.id} className="border p-4 rounded">
            <h3 className="text-xl font-bold">{post.title}</h3>
            <p className="mt-2">{post.body}</p>
          </div>
        ))}
      </div>
    </div>
  );
};

export default PostView;
```

---

### **üîÑ Flow Summary:**
```
1. Component mounts
   ‚Üì
2. useEffect runs ‚Üí dispatch(fetchPosts())
   ‚Üì
3. fetchPosts.pending ‚Üí isLoading = true
   ‚Üì
4. API call to jsonplaceholder
   ‚Üì
5. fetchPosts.fulfilled ‚Üí posts = action.payload, isLoading = false
   ‚Üì
6. Component re-renders with posts data
```

---

### **üìù Key Points:**
- **createAsyncThunk**: Automatically creates pending/fulfilled/rejected action types
- **useSelector**: Extracts data from Redux store
- **useDispatch**: Dispatches actions to Redux store
- **extraReducers**: Handles async thunk lifecycle (pending, fulfilled, rejected)
- **useEffect**: Triggers data fetch on component mount

---
